<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EXTRANEF - Administração</title>
    <link rel="stylesheet" href="style-electron.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <h1><i class="fas fa-cog"></i> Administração</h1>
        <nav class="nav">
          <a href="index-electron.html" class="nav-link"
            ><i class="fas fa-home"></i> Início</a
          >
          <a href="funcionarios.html" class="nav-link"
            ><i class="fas fa-users"></i> Funcionários</a
          >
          <a href="faltas.html" class="nav-link"
            ><i class="fas fa-calendar-times"></i> Faltas</a
          >
          <a href="ferias.html" class="nav-link"
            ><i class="fas fa-umbrella-beach"></i> Férias</a
          >
          <a href="atestados.html" class="nav-link"
            ><i class="fas fa-file-medical"></i> Atestados</a
          >
          <a href="adm-electron.html" class="nav-link active"
            ><i class="fas fa-cog"></i> Administração</a
          >
        </nav>
      </header>

      <!-- Conteúdo Principal -->
      <main class="main-content">
        <!-- Estatísticas -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-database"></i>
            </div>
            <div class="stat-content">
              <h3>Total de Dados</h3>
              <p class="stat-number" id="totalDados">0</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="stat-content">
              <h3>Funcionários</h3>
              <p class="stat-number" id="totalFuncionarios">0</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-building"></i>
            </div>
            <div class="stat-content">
              <h3>Equipes</h3>
              <p class="stat-number" id="totalEquipes">0</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-briefcase"></i>
            </div>
            <div class="stat-content">
              <h3>Cargos</h3>
              <p class="stat-number" id="totalCargos">0</p>
            </div>
          </div>
        </div>

        <!-- Botões de Ação -->
        <div class="action-buttons">
          <button class="btn btn-primary" onclick="abrirModalEquipe()">
            <i class="fas fa-plus"></i> Nova Equipe
          </button>
          <button class="btn btn-success" onclick="abrirModalCargo()">
            <i class="fas fa-plus"></i> Novo Cargo
          </button>
          <button class="btn btn-info" onclick="abrirModalHorario()">
            <i class="fas fa-plus"></i> Novo Horário
          </button>
          <button class="btn btn-warning" onclick="exportarTodosDados()">
            <i class="fas fa-download"></i> Backup Completo
          </button>
        </div>

        <!-- Configurações do Sistema -->
        <div class="config-section">
          <h3><i class="fas fa-cogs"></i> Configurações do Sistema</h3>

          <div class="config-grid">
            <div class="config-card">
              <h4><i class="fas fa-palette"></i> Tema</h4>
              <div class="config-controls">
                <label for="temaSistema">Tema do Sistema:</label>
                <select id="temaSistema" onchange="alterarTema()">
                  <option value="dark">Escuro</option>
                  <option value="light">Claro</option>
                  <option value="auto">Automático</option>
                </select>
              </div>
            </div>

            <div class="config-card">
              <h4><i class="fas fa-language"></i> Idioma</h4>
              <div class="config-controls">
                <label for="idiomaSistema">Idioma:</label>
                <select id="idiomaSistema" onchange="alterarIdioma()">
                  <option value="pt-BR">Português (Brasil)</option>
                  <option value="en">English</option>
                  <option value="es">Español</option>
                </select>
              </div>
            </div>

            <div class="config-card">
              <h4><i class="fas fa-bell"></i> Notificações</h4>
              <div class="config-controls">
                <label>
                  <input
                    type="checkbox"
                    id="notificacoesAtivas"
                    onchange="alterarNotificacoes()"
                  />
                  Ativar notificações
                </label>
              </div>
            </div>

            <div class="config-card">
              <h4><i class="fas fa-save"></i> Backup</h4>
              <div class="config-controls">
                <label>
                  <input
                    type="checkbox"
                    id="backupAutomatico"
                    onchange="alterarBackupAutomatico()"
                  />
                  Backup automático
                </label>
              </div>
            </div>

            <div class="config-card">
              <h4><i class="fas fa-cloud"></i> Google Drive</h4>
              <div class="config-controls">
                <div class="form-group">
                  <label for="gdriveClientId">Client ID</label>
                  <input
                    type="text"
                    id="gdriveClientId"
                    placeholder="OAuth 2.0 Client ID"
                  />
                </div>
                <div class="form-group">
                  <label for="gdriveClientSecret">Client Secret</label>
                  <input
                    type="password"
                    id="gdriveClientSecret"
                    placeholder="OAuth 2.0 Client Secret"
                  />
                </div>
                <div class="form-group">
                  <label for="gdriveFolderId">Folder ID (pasta alvo)</label>
                  <input
                    type="text"
                    id="gdriveFolderId"
                    placeholder="ID da pasta no Drive"
                  />
                </div>
                <div
                  class="form-actions"
                  style="
                    margin-top: 8px;
                    display: flex;
                    gap: 8px;
                    flex-wrap: wrap;
                  "
                >
                  <button
                    class="btn btn-primary"
                    onclick="conectarGoogleDrive(event)"
                  >
                    <i class="fas fa-link"></i> Conectar/Atualizar
                  </button>
                  <button
                    class="btn btn-secondary"
                    onclick="testarUploadDrive(event)"
                  >
                    <i class="fas fa-upload"></i> Testar Upload
                  </button>
                </div>
                <small id="gdriveStatus" class="text-muted"></small>
              </div>
            </div>
            <div class="config-card">
              <h4><i class="fas fa-file-upload"></i> Backup Faltas/Férias</h4>
              <div class="config-controls">
                <div class="form-row">
                  <div class="form-group">
                    <label>Período</label>
                    <select id="reportPeriodo">
                      <option value="day">Dia</option>
                      <option value="week">Semana</option>
                      <option value="month" selected>Mês</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>Formato</label>
                    <select id="reportFormato">
                      <option value="csv" selected>CSV</option>
                      <option value="json">JSON</option>
                    </select>
                  </div>
                </div>
                <div
                  class="form-actions"
                  style="
                    margin-top: 8px;
                    display: flex;
                    gap: 8px;
                    flex-wrap: wrap;
                  "
                >
                  <button
                    class="btn btn-info"
                    onclick="enviarRelatorioDrive('faltas')"
                  >
                    <i class="fas fa-cloud-upload-alt"></i> Enviar Faltas
                  </button>
                  <button
                    class="btn btn-info"
                    onclick="enviarRelatorioDrive('ferias')"
                  >
                    <i class="fas fa-cloud-upload-alt"></i> Enviar Férias
                  </button>
                </div>
                <small class="text-muted"
                  >Os arquivos serão enviados para a pasta Backups/Faltas ou
                  Backups/Ferias no Drive configurado.</small
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Gestão de Equipes -->
        <div class="management-section">
          <h3><i class="fas fa-building"></i> Gestão de Equipes</h3>
          <div class="table-container">
            <table class="data-table" id="tabelaEquipes">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nome</th>
                  <th>Descrição</th>
                  <th>Funcionários</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody id="tbodyEquipes">
                <!-- Dados serão carregados dinamicamente -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Gestão de Cargos -->
        <div class="management-section">
          <h3><i class="fas fa-briefcase"></i> Gestão de Cargos</h3>
          <div class="table-container">
            <table class="data-table" id="tabelaCargos">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nome</th>
                  <th>Nível</th>
                  <th>Funcionários</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody id="tbodyCargos">
                <!-- Dados serão carregados dinamicamente -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Gestão de Horários -->
        <div class="management-section">
          <h3><i class="fas fa-clock"></i> Gestão de Horários</h3>
          <div class="table-container">
            <table class="data-table" id="tabelaHorarios">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nome</th>
                  <th>Início</th>
                  <th>Fim</th>
                  <th>Tipo</th>
                  <th>Funcionários</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody id="tbodyHorarios">
                <!-- Dados serão carregados dinamicamente -->
              </tbody>
            </table>
          </div>
        </div>
      </main>
    </div>

    <!-- Modal Equipe -->
    <div id="modalEquipe" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalEquipeTitulo">Nova Equipe</h2>
          <span class="close" onclick="fecharModalEquipe()">&times;</span>
        </div>
        <form id="formEquipe" onsubmit="salvarEquipe(event)">
          <div class="form-group">
            <label for="nomeEquipe">Nome da Equipe *</label>
            <input
              type="text"
              id="nomeEquipe"
              name="nomeEquipe"
              required
              placeholder="Ex: Vendas, TI, Administrativo..."
            />
          </div>
          <div class="form-group">
            <label for="descricaoEquipe">Descrição</label>
            <textarea
              id="descricaoEquipe"
              name="descricaoEquipe"
              rows="3"
              placeholder="Descrição da equipe..."
            ></textarea>
          </div>
          <div class="form-actions">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="fecharModalEquipe()"
            >
              Cancelar
            </button>
            <button type="submit" class="btn btn-primary">Salvar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal Cargo -->
    <div id="modalCargo" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalCargoTitulo">Novo Cargo</h2>
          <span class="close" onclick="fecharModalCargo()">&times;</span>
        </div>
        <form id="formCargo" onsubmit="salvarCargo(event)">
          <div class="form-group">
            <label for="nomeCargo">Nome do Cargo *</label>
            <input
              type="text"
              id="nomeCargo"
              name="nomeCargo"
              required
              placeholder="Ex: Analista, Gerente, Diretor..."
            />
          </div>
          <div class="form-group">
            <label for="nivelCargo">Nível *</label>
            <input
              type="number"
              id="nivelCargo"
              name="nivelCargo"
              required
              min="1"
              max="10"
              placeholder="1-10"
            />
          </div>
          <div class="form-actions">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="fecharModalCargo()"
            >
              Cancelar
            </button>
            <button type="submit" class="btn btn-primary">Salvar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal Horário -->
    <div id="modalHorario" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalHorarioTitulo">Novo Horário</h2>
          <span class="close" onclick="fecharModalHorario()">&times;</span>
        </div>
        <form id="formHorario" onsubmit="salvarHorario(event)">
          <div class="form-group">
            <label for="nomeHorario">Nome do Horário *</label>
            <input
              type="text"
              id="nomeHorario"
              name="nomeHorario"
              required
              placeholder="Ex: Matutino, Vespertino, Integral..."
            />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="inicioHorario">Horário de Início *</label>
              <input
                type="time"
                id="inicioHorario"
                name="inicioHorario"
                required
              />
            </div>
            <div class="form-group">
              <label for="fimHorario">Horário de Fim *</label>
              <input type="time" id="fimHorario" name="fimHorario" required />
            </div>
          </div>
          <div class="form-group">
            <label for="tipoHorario">Tipo *</label>
            <select id="tipoHorario" name="tipoHorario" required>
              <option value="">Selecione o tipo</option>
              <option value="parcial">Parcial</option>
              <option value="integral">Integral</option>
            </select>
          </div>
          <div class="form-actions">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="fecharModalHorario()"
            >
              Cancelar
            </button>
            <button type="submit" class="btn btn-primary">Salvar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Scripts -->
    <script src="ui.js"></script>
    <script src="database.js"></script>
    <script src="adm.js"></script>
  </body>
</html>
